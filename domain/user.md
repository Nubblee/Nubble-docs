# User(유저) 도메인

## 정의 및 책임

유저(User)는 코딩테스트 스터디 서비스의 기본 사용자로, 서비스에 가입하여 스터디를 탐색하고 참여하는 주체입니다. 유저는 스터디를 개설하거나 기존 스터디에 참여함으로써 스터디장(Leader) 또는 스터디원(Member) 역할을 가질 수 있습니다.

## 핵심 특성

- 스터디 탐색, 검색, 신청, 개설 등 기본 활동 수행
- 여러 스터디에 동시에 참여 가능
- 스터디별로 서로 다른 역할 보유 가능(한 스터디에서는 스터디장, 다른 스터디에서는 스터디원)

| 속성 | 타입 | 설명 |
|:---|:---|:---|
| id | String | 유저 식별자 |
| username | String | 사용자 이름(로그인 ID) - 고유값 |
| email | String | 이메일 주소 - 고유값 |
| emailVerified | Boolean | 이메일 인증 완료 여부 |
| password | String | 비밀번호 |
| nickname | String | 닉네임, 활동 이름 |
| profileImage | String | 프로필 이미지 URL |
| region | String | 지역 정보 (시/도 + 시/군/구 수준) |
| accountStatus | Enum | 계정 상태(ACTIVE/INACTIVE/SUSPENDED/DORMANT/WITHDRAWN) |

**참고:**

- region 필드는 상세 주소가 아닌 시/도 및 시/군/구 수준의 지역 정보만 저장합니다. 추후 한국의 행정구역 데이터를 기반으로 제한된 선택지만 입력 가능하도록 구현할 예정입니다.

- 계정 생성 시간(createdAt), 정보 수정 시간(updatedAt), 마지막 로그인 시간(lastLoginAt) 등의 메타데이터는 구현 및 인프라 관점에서 필요할 수 있으나, 핵심 도메인 모델에는 포함하지 않습니다. 이러한 정보는 감사(audit) 목적이나 시스템 운영 관점에서 별도로 관리할 수 있습니다.

- 현재 구현에서는 ACTIVE 상태만 고려하고 있으며, 다른 상태들은 미래 확장성을 위해 설계에 포함되었습니다.

- 이메일은 두 가지 주요 목적으로 사용됩니다: 마케팅 및 정보 제공을 위한 채널로서의 역할과 사용자 신뢰도 확보를 위한 인증 수단으로서의 역할입니다. 이메일 인증 상태에 따라 사용자의 기능 접근 권한이 차등적으로 적용됩니다.

## 주요 메서드 및 기능

- `register()` : 회원가입
- `login()` : 로그인
- `logout()` : 로그아웃
- `updateProfile()` : 프로필 정보 수정
- `changePassword()` : 비밀번호 변경
- `withdraw()` : 계정 탈퇴
- `resetPassword()` : 비밀번호 재설정
- `verifyEmail()` : 이메일 인증
- `checkUsernameAvailability()` : 아이디 중복 확인

**참고:** User 도메인은 코어 도메인으로 거의 모든 도메인과 연관관계를 맺고 있습니다. 이 문서에서는 연관관계보다는 유저 정보 관리와 상태 변경 등 User 도메인 자체의 책임과 기능에 집중합니다. 스터디 참여, 문제 풀이 제출 등의 기능은 각각 StudyGroup, StudyMembership, Solution 등의 해당 도메인 문서에서 정의합니다.

## 비즈니스 규칙

- 유저는 username(로그인 ID)을(를) 통해 고유하게 식별됨
- 비밀번호는 충분한 보안 강도를 갖추어야 함 (구체적인 규칙은 구현 단계에서 결정)
- 유저의 이메일은 고유해야 함 - 1 아이디당 1 이메일로 중복 가입 방지
- 유저는 언제든지 탈퇴 가능하나, 스터디장인 경우 권한 양도 후 탈퇴 가능
- 민감 정보는 외부에 노출되어서는 안 됨
- 개인정보 활용시에는 명시적인 동의를 받아야 함(현재 개인정보를 활용하지 않음)

## 확장 고려사항

- 인증 방식 다양화: 소셜 로그인(깃허브 등) 지원

참고: 인증 방식 다양화는 추후 개발 계획에 포함되어 있습니다. 계정 활동 로깅이나 계정 복구 같은 기능은 서비스가 성장한 후 필요에 따라 고려할 수 있습니다.

### 미래 확장성 고려사항

- 소셜 로그인 지원: 깃허브, 구글 계정을 통한 간편 로그인 기능 추가
- 계정 상태 전환 기능: ACTIVE 외에 INACTIVE, DORMANT, SUSPENDED 등의 상태 구현
- 이메일 수신 설정: 마케팅, 알림 등 이메일 수신 항목별 설정 기능

### 계정 상태 전환 규칙 (미래 확장성 고려)

- **ACTIVE** → **SUSPENDED:** 관리자에 의한 계정 정지 시
- **SUSPENDED** → **ACTIVE:** 관리자에 의한 정지 해제 시
- **ACTIVE** → **INACTIVE:** 장기간 미접속 시 (기간은 구현 단계에서 결정)
- **INACTIVE** → **DORMANT:** 추가 미접속 기간 경과 시
- **INACTIVE/DORMANT** → **ACTIVE:** 재로그인 및 필요 시 추가 인증 완료
- **ACTIVE** → **WITHDRAWN:** 사용자의 탈퇴 요청 시 (스터디장인 경우 권한 양도 필요)
